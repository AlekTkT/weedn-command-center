"use strict";(()=>{var e={};e.id=250,e.ids=[250],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9504:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>g,patchFetch:()=>v,requestAsyncStorage:()=>l,routeModule:()=>u,serverHooks:()=>d,staticGenerationAsyncStorage:()=>m});var n={};a.r(n),a.d(n,{GET:()=>p,POST:()=>c});var r=a(9303),o=a(8716),i=a(670),s=a(7070);async function c(e){try{let{action:t,name:a,subject:n,listId:r,segmentId:o,content:i,requireApproval:c=!0}=await e.json();if(!t||!a)return s.NextResponse.json({error:"Action et nom requis"},{status:400});let p={id:`action_${Date.now()}`,type:"klaviyo_campaign",action:t,params:{name:a,subject:n,listId:r,segmentId:o,content:i},status:c?"pending_approval":"pending_execution",createdAt:new Date().toISOString(),approvedAt:null,executedAt:null,result:null};return s.NextResponse.json({success:!0,message:c?"Action en attente d'approbation":"Action programm\xe9e pour ex\xe9cution",actionRequest:p,note:"Cette action sera ex\xe9cut\xe9e via Claude Code MCP"})}catch(e){return console.error("Klaviyo action error:",e),s.NextResponse.json({error:"Erreur serveur"},{status:500})}}async function p(){return s.NextResponse.json({availableActions:[{action:"create_campaign",description:"Cr\xe9er une nouvelle campagne email"},{action:"create_template",description:"Cr\xe9er un template email"},{action:"send_campaign",description:"Envoyer une campagne"},{action:"create_flow",description:"Cr\xe9er un flow automatis\xe9"}],requiredParams:{create_campaign:["name","subject","listId OR segmentId"],create_template:["name","html"],send_campaign:["campaignId"],create_flow:["name","trigger"]}})}let u=new r.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/actions/klaviyo/campaign/route",pathname:"/api/actions/klaviyo/campaign",filename:"route",bundlePath:"app/api/actions/klaviyo/campaign/route"},resolvedPagePath:"/Users/alektkt/Documents/weedn-project/weedn-command-center/src/app/api/actions/klaviyo/campaign/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:l,staticGenerationAsyncStorage:m,serverHooks:d}=u,g="/api/actions/klaviyo/campaign/route";function v(){return(0,i.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:m})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),n=t.X(0,[948,972],()=>a(9504));module.exports=n})();